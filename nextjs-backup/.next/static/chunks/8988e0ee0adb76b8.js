(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87753,e=>{"use strict";function a(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}e.s(["categories",0,{income:["Salary","Freelance","Investment","Rental","Business","Other"],expense:["Groceries","Utilities","Transport","Rent/EMI","Education","Healthcare","Entertainment","Shopping","Food & Dining","Insurance","Other"]},"formatCurrency",()=>a])},81289,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(64741),s=e.i(87753);function n(){var e;let{data:n}=(0,r.useFinance)(),[d,l]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[c,g]=(0,t.useState)(!1),[x,m]=(0,t.useState)(null),[y,h]=(0,t.useState)([]),[u,b]=(0,t.useState)(""),[p,k]=(0,t.useState)(""),[f,v]=(0,t.useState)(null),[j,N]=(0,t.useState)(""),[w,I]=(0,t.useState)(!1),[S,E]=(0,t.useState)(null),[A,C]=(0,t.useState)([]),[T,P]=(0,t.useState)(!1),[O,R]=(0,t.useState)(null),F=(0,t.useMemo)(()=>n.monthlyIncome>0?(n.monthlyIncome-n.monthlyExpenses)/n.monthlyIncome*100:0,[n.monthlyIncome,n.monthlyExpenses]),M=(0,t.useMemo)(()=>n.monthlyIncome>0?n.monthlyExpenses/n.monthlyIncome*100:100,[n.monthlyIncome,n.monthlyExpenses]),D=(e=Math.round(f??0))>=80?{text:"Excellent",desc:"Outstanding financial health"}:e>=60?{text:"Good",desc:"Above average"}:e>=40?{text:"Fair",desc:"Room for improvement"}:{text:"Needs Work",desc:"Requires attention"};(0,t.useEffect)(()=>{try{let e=localStorage.getItem("actionPlan");e?h(JSON.parse(e)):h([{id:crypto.randomUUID(),text:"Review recurring subscriptions",due:"This week",done:!1},{id:crypto.randomUUID(),text:"Set up automatic savings (SIP)",due:"This month",done:!1}])}catch{}},[]),(0,t.useEffect)(()=>{try{localStorage.setItem("actionPlan",JSON.stringify(y))}catch{}},[y]),(0,t.useEffect)(()=>{let e={monthlyIncome:n.monthlyIncome,monthlyExpenses:n.monthlyExpenses,balance:n.balance,savingsRate:F,expenseRatio:M,transactions:n.transactions?.slice(0,25)||[]},a=async()=>{P(!0);try{let a=await fetch("/api/ai/recommendations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({financialData:e})}),t=await a.json();if(Array.isArray(t.items)&&t.items.length>0)C(t.items);else throw Error("No items");R(t.source||null)}catch(a){let e=[];F<20&&e.push({title:"Boost Savings Rate",desc:`Aim to save ${(0,s.formatCurrency)(Math.max(0,Math.round(.2*n.monthlyIncome-(n.monthlyIncome-n.monthlyExpenses))))} more monthly`}),n.monthlyExpenses>.7*n.monthlyIncome&&e.push({title:"Reduce Monthly Expenses",desc:"Try to cut expenses by 10-15%"}),0===e.length&&(e.push({title:"Build Emergency Fund",desc:`Target 6 months expenses: ${(0,s.formatCurrency)(6*n.monthlyExpenses)}`}),e.push({title:"Consider Investments",desc:"Explore SIPs and mutual funds for surplus income"})),C(e),R("fallback")}finally{P(!1)}};(async()=>{I(!0);try{let a=await fetch("/api/ai/health",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({financialData:e})}),t=await a.json();"number"==typeof t.score&&v(Math.round(t.score)),t.summary&&N(t.summary),E(t.source||null)}catch(a){let e=50;F>=30?e+=30:F>=20?e+=25:F>=10?e+=15:F>0&&(e+=5),M<=50?e+=20:M<=70&&(e+=10),v(e=Math.min(100,Math.max(0,e))),N("Heuristic score based on savings rate and expense ratio."),E("fallback")}finally{I(!1)}})(),a()},[n.monthlyIncome,n.monthlyExpenses,n.balance,n.transactions]);let U=async()=>{if(d.trim()){g(!0),o(""),m(null);try{let e=await fetch("/api/ai/advisor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:d,financialData:{monthlyIncome:n.monthlyIncome,monthlyExpenses:n.monthlyExpenses,balance:n.balance,savingsRate:F,transactionCount:n.transactions.length}})}),a=await e.json();a.answer?(o(a.answer),m(a.source)):o("Sorry, I couldn't generate a response. Please try again.")}catch(e){console.error("Error asking question:",e),o("Sorry, there was an error processing your question. Please try again.")}finally{g(!1),l("")}}};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8 space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"AI Financial Advisor"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Get personalized financial insights and recommendations"})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-8",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-3xl",children:"ðŸ¤–"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Financial Health Score"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("div",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:w||null===f?"â€”":Math.round(f)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gray-600 dark:bg-gray-400 rounded-full transition-all duration-500",style:{width:`${f??0}%`}})}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[w?"Analyzing...":`${D.text} â€¢ ${D.desc}`,S&&(0,a.jsx)("span",{className:"ml-2 text-xs px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",children:"ai"===S?"AI":"Fallback"})]})]})]}),(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:w?"Generating AI summary of your financial healthâ€¦":j||"Summary unavailable."})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl",children:"ðŸ’¡"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Smart Recommendations"})]}),T?(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Generating personalized recommendationsâ€¦"}):(0,a.jsx)("ul",{className:"space-y-3",children:A.map((e,t)=>(0,a.jsxs)("li",{className:"flex gap-3",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"â€¢"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.desc})]})]},t))}),O&&(0,a.jsxs)("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:["Source: ","ai"===O?"AI":"Fallback"]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl",children:"ðŸ“‹"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Action Plan"})]}),(0,a.jsxs)("div",{className:"mb-3 flex flex-col sm:flex-row gap-2",children:[(0,a.jsx)("input",{type:"text",value:u,onChange:e=>b(e.target.value),placeholder:"Add an action item (e.g., Review subscriptions)",className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm"}),(0,a.jsx)("input",{type:"text",value:p,onChange:e=>k(e.target.value),placeholder:"Due (e.g., This week)",className:"sm:w-48 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm"}),(0,a.jsx)("button",{onClick:()=>{let e=u.trim();e&&(h(a=>[{id:crypto.randomUUID(),text:e,due:p||void 0,done:!1},...a]),b(""),k(""))},className:"px-4 py-2 rounded-lg bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-sm font-medium disabled:opacity-50",disabled:!u.trim(),children:"Add"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[0===y.length&&(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No action items yet. Add your first task above."}),y.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,a.jsx)("input",{type:"checkbox",className:"mt-1",checked:e.done,onChange:()=>{var a;return a=e.id,void h(e=>e.map(e=>e.id===a?{...e,done:!e.done}:e))}}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:`text-sm font-medium ${e.done?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:e.text}),e.due&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due ",e.due]})]}),(0,a.jsx)("button",{onClick:()=>{var a;return a=e.id,void h(e=>e.filter(e=>e.id!==a))},className:"text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-100",children:"Remove"})]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("span",{className:"text-2xl",children:"ðŸ’¬"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Ask Your AI Advisor"}),"ai"===x&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded",children:"Powered by Gemini"})]}),(0,a.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,a.jsx)("input",{type:"text",value:d,onChange:e=>l(e.target.value),onKeyPress:e=>"Enter"===e.key&&!c&&U(),placeholder:"Ask any financial question...",disabled:c,className:"flex-1 px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-600 focus:border-transparent disabled:opacity-50"}),(0,a.jsx)("button",{onClick:U,disabled:c||!d.trim(),className:"px-6 py-3 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 font-medium rounded-lg hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"â³":"Ask"})]}),c&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"animate-spin text-xl",children:"ðŸ¤–"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Thinking..."})]})}),i&&!c&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:i})}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>l("How much should I save every month?"),className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"ðŸ’° Savings advice"}),(0,a.jsx)("button",{onClick:()=>l("What investments should I consider?"),className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"ðŸ“ˆ Investment tips"}),(0,a.jsx)("button",{onClick:()=>l("How to reduce my expenses?"),className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"ðŸ’³ Budget help"}),(0,a.jsx)("button",{onClick:()=>l("How to save tax?"),className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"ðŸ“‹ Tax planning"})]})]})]})}e.s(["default",()=>n])}]);