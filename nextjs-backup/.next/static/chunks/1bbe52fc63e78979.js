(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89954,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(4012),s=e.i(18566);function n(){let{login:e,completeTotp:n,startEmailOtp:l,completeEmailOtp:i,completeRecovery:o}=(0,r.useAuth)(),d=(0,s.useRouter)(),[c,u]=(0,a.useState)(""),[g,x]=(0,a.useState)(""),[m,y]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),[S,k]=(0,a.useState)(""),[C,A]=(0,a.useState)("totp"),[T,q]=(0,a.useState)(!1);async function R(t){t.preventDefault(),y(null),p(!0);let a=await e(c,g);(p(!1),!0===a)?d.push("/dashboard"):a&&a.mfa_required?f(a.mfa_token):y("Invalid credentials. Try signing up if you don't have an account.")}async function I(e){if(e.preventDefault(),!b)return;y(null),p(!0);let t=!1;"totp"===C?(t=await n(b,v))||y("Invalid authenticator code."):"email"===C?(t=await i(b,N))||y("Invalid email code."):"recovery"===C&&((t=await o(b,S.trim()))||y("Invalid recovery code.")),p(!1),t&&d.push("/dashboard")}async function D(){if(!b)return;y(null),p(!0);let e=await l(b);p(!1),e?q(!0):y("Could not send email code. Try again later.")}return(0,t.jsx)("div",{className:"min-h-[70vh] flex items-center justify-center px-4 bg-black",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-gray-900 rounded-xl border border-gray-800 p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex w-16 h-16 bg-gray-800 rounded-xl items-center justify-center mb-4",children:(0,t.jsx)("span",{className:"text-3xl",children:"üîê"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Welcome back"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Sign in to your account"})]}),b?(0,t.jsxs)("form",{onSubmit:I,className:"space-y-5",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-300 space-y-2",children:[(0,t.jsx)("div",{children:"Two‚Äëfactor authentication required. Choose a method:"}),(0,t.jsx)("div",{className:"flex gap-2 text-xs",children:["totp","email","recovery"].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>A(e),className:`px-3 py-1.5 rounded-md border ${C===e?"bg-gray-100 text-gray-900 border-gray-300":"bg-gray-800 text-gray-300 border-gray-700"}`,children:"totp"===e?"Authenticator":"email"===e?"Email Code":"Recovery Code"},e))})]}),"totp"===C&&(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"6‚Äëdigit authenticator code"}),(0,t.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),required:!0,maxLength:6,className:"mt-1 tracking-widest text-center block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5 focus:ring-2 focus:ring-gray-600 focus:border-transparent placeholder-gray-400"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-400",children:"Open Google Authenticator / Authy ‚Äì the code refreshes every 30s."})]}),"email"===C&&(0,t.jsxs)("div",{className:"space-y-3",children:[!T&&(0,t.jsx)("button",{type:"button",onClick:D,disabled:h,className:"w-full px-4 py-2.5 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white text-sm disabled:opacity-50",children:h?"Sending...":"Send email code"}),T&&(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Enter code sent to your email"}),(0,t.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),required:!0,maxLength:6,className:"mt-1 tracking-widest text-center block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5 focus:ring-2 focus:ring-gray-600 focus:border-transparent placeholder-gray-400"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-400",children:"Check your inbox (and spam). Code expires in 10 minutes."})]})]}),"recovery"===C&&(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Recovery code"}),(0,t.jsx)("input",{type:"text",value:S,onChange:e=>k(e.target.value),required:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5 focus:ring-2 focus:ring-gray-600 focus:border-transparent placeholder-gray-400"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-amber-400",children:"Single‚Äëuse. After login, generate new codes in Settings."})]}),m&&(0,t.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-800 p-3 rounded-lg border border-gray-700",children:["‚ö†Ô∏è ",m]}),(0,t.jsx)("button",{type:"submit",className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-900 font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",disabled:h||"email"===C&&T&&N.length<6||"totp"===C&&v.length<6||"recovery"===C&&S.length<6,children:h?"‚è≥ Verifying...":"Verify & Sign in"}),(0,t.jsxs)("div",{className:"text-center text-xs text-gray-500 space-y-1",children:[(0,t.jsx)("div",{children:"Need authenticator? Set up under Settings ‚Üí Two‚ÄëFactor Authentication."}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{href:"/auth/forgot-password",className:"text-gray-300 hover:text-white underline underline-offset-2",children:"Forgot password?"})})]})]}):(0,t.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Email"}),(0,t.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),required:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5 focus:ring-2 focus:ring-gray-600 focus:border-transparent placeholder-gray-400"})]}),(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Password"}),(0,t.jsx)("input",{type:"password",value:g,onChange:e=>x(e.target.value),required:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5 focus:ring-2 focus:ring-gray-600 focus:border-transparent placeholder-gray-400"})]}),m&&(0,t.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-800 p-3 rounded-lg border border-gray-700",children:["‚ö†Ô∏è ",m]}),(0,t.jsx)("button",{type:"submit",className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-900 font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",disabled:h,children:h?"‚è≥ Signing in...":"Sign in"}),(0,t.jsxs)("div",{className:"text-center text-sm text-gray-400",children:["Don't have an account?"," ",(0,t.jsx)("a",{href:"/signup",className:"text-white font-medium hover:underline",children:"Create account"}),(0,t.jsx)("span",{className:"mx-2 text-gray-600",children:"‚Ä¢"}),(0,t.jsx)("a",{href:"/auth/forgot-password",className:"text-gray-300 hover:text-white underline underline-offset-2",children:"Forgot password?"})]})]})]})})}e.s(["default",()=>n])}]);