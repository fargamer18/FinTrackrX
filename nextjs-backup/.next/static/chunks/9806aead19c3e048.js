(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98475,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function r(){let[e,r]=(0,a.useState)("request"),[s,l]=(0,a.useState)(""),[n,d]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(null),[p,b]=(0,a.useState)(null);async function h(e){e.preventDefault(),y(null),b(null),g(!0);try{let e=await fetch("/api/auth/password-otp/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||"Failed to send code")}b("If that email exists, a code was sent."),r("verify")}catch(e){y(e.message)}finally{g(!1)}}async function f(e){if(e.preventDefault(),y(null),b(null),o!==c)return void y("Passwords do not match");g(!0);try{let e=await fetch("/api/auth/password-otp/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,code:n,new_password:o})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to update password");b("Password updated. You can now log in.")}catch(e){y(e.message)}finally{g(!1)}}return(0,t.jsx)("div",{className:"min-h-[70vh] flex items-center justify-center px-4 bg-black",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-gray-900 rounded-xl border border-gray-800 p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex w-16 h-16 bg-gray-800 rounded-xl items-center justify-center mb-4",children:(0,t.jsx)("span",{className:"text-3xl",children:"✉️"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Password Reset (Email Code)"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"request"===e?"Enter your account email to receive a code":"Enter the code we emailed and choose a new password"})]}),"request"===e&&(0,t.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Email"}),(0,t.jsx)("input",{type:"email",value:s,onChange:e=>l(e.target.value),required:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5 focus:ring-2 focus:ring-gray-600 focus:border-transparent placeholder-gray-400"})]}),p&&(0,t.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-800 p-3 rounded-lg border border-gray-700",children:["✅ ",p]}),x&&(0,t.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-800 p-3 rounded-lg border border-gray-700",children:["⚠️ ",x]}),(0,t.jsx)("button",{disabled:m||!s,className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-900 font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:m?"Sending…":"Send code"}),(0,t.jsx)("div",{className:"text-center text-sm text-gray-400",children:(0,t.jsx)("a",{href:"/login",className:"text-white font-medium hover:underline",children:"Back to login"})})]}),"verify"===e&&(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Email"}),(0,t.jsx)("input",{type:"email",value:s,disabled:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800/60 text-gray-400 px-4 py-2.5"})]}),(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Code"}),(0,t.jsx)("input",{value:n,onChange:e=>d(e.target.value),required:!0,pattern:"[0-9]{6}",maxLength:6,className:"mt-1 tracking-widest text-center text-lg block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5 focus:ring-2 focus:ring-gray-600"})]}),(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"New password"}),(0,t.jsx)("input",{type:"password",value:o,onChange:e=>i(e.target.value),required:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5"})]}),(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Confirm password"}),(0,t.jsx)("input",{type:"password",value:c,onChange:e=>u(e.target.value),required:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5"})]}),p&&(0,t.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-800 p-3 rounded-lg border border-gray-700",children:["✅ ",p]}),x&&(0,t.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-800 p-3 rounded-lg border border-gray-700",children:["⚠️ ",x]}),(0,t.jsx)("button",{disabled:m||!n||!o||o!==c,className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-900 font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:m?"Updating…":"Update password"}),(0,t.jsx)("div",{className:"text-center text-sm text-gray-400",children:(0,t.jsx)("button",{type:"button",onClick:()=>{r("request"),b(null),y(null)},className:"text-white font-medium hover:underline",children:"Resend code"})})]})]})})}e.s(["default",()=>r])}]);