module.exports=[84934,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)("request"),[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null);async function s(a){a.preventDefault(),p(null),r(null),n(!0);try{let a=await fetch("/api/auth/password-otp/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b.error||"Failed to send code")}r("If that email exists, a code was sent."),d("verify")}catch(a){p(a.message)}finally{n(!1)}}async function t(a){if(a.preventDefault(),p(null),r(null),i!==k)return void p("Passwords do not match");n(!0);try{let a=await fetch("/api/auth/password-otp/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:g,new_password:i})}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to update password");r("Password updated. You can now log in.")}catch(a){p(a.message)}finally{n(!1)}}return(0,b.jsx)("div",{className:"min-h-[70vh] flex items-center justify-center px-4 bg-black",children:(0,b.jsxs)("div",{className:"w-full max-w-md bg-gray-900 rounded-xl border border-gray-800 p-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"inline-flex w-16 h-16 bg-gray-800 rounded-xl items-center justify-center mb-4",children:(0,b.jsx)("span",{className:"text-3xl",children:"✉️"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Password Reset (Email Code)"}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"request"===a?"Enter your account email to receive a code":"Enter the code we emailed and choose a new password"})]}),"request"===a&&(0,b.jsxs)("form",{onSubmit:s,className:"space-y-4",children:[(0,b.jsxs)("label",{className:"block",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Email"}),(0,b.jsx)("input",{type:"email",value:e,onChange:a=>f(a.target.value),required:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5 focus:ring-2 focus:ring-gray-600 focus:border-transparent placeholder-gray-400"})]}),q&&(0,b.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-800 p-3 rounded-lg border border-gray-700",children:["✅ ",q]}),o&&(0,b.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-800 p-3 rounded-lg border border-gray-700",children:["⚠️ ",o]}),(0,b.jsx)("button",{disabled:m||!e,className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-900 font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:m?"Sending…":"Send code"}),(0,b.jsx)("div",{className:"text-center text-sm text-gray-400",children:(0,b.jsx)("a",{href:"/login",className:"text-white font-medium hover:underline",children:"Back to login"})})]}),"verify"===a&&(0,b.jsxs)("form",{onSubmit:t,className:"space-y-4",children:[(0,b.jsxs)("label",{className:"block",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Email"}),(0,b.jsx)("input",{type:"email",value:e,disabled:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800/60 text-gray-400 px-4 py-2.5"})]}),(0,b.jsxs)("label",{className:"block",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Code"}),(0,b.jsx)("input",{value:g,onChange:a=>h(a.target.value),required:!0,pattern:"[0-9]{6}",maxLength:6,className:"mt-1 tracking-widest text-center text-lg block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5 focus:ring-2 focus:ring-gray-600"})]}),(0,b.jsxs)("label",{className:"block",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"New password"}),(0,b.jsx)("input",{type:"password",value:i,onChange:a=>j(a.target.value),required:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5"})]}),(0,b.jsxs)("label",{className:"block",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Confirm password"}),(0,b.jsx)("input",{type:"password",value:k,onChange:a=>l(a.target.value),required:!0,className:"mt-1 block w-full rounded-lg border border-gray-700 bg-gray-800 text-white px-4 py-2.5"})]}),q&&(0,b.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-800 p-3 rounded-lg border border-gray-700",children:["✅ ",q]}),o&&(0,b.jsxs)("div",{className:"text-sm text-gray-300 bg-gray-800 p-3 rounded-lg border border-gray-700",children:["⚠️ ",o]}),(0,b.jsx)("button",{disabled:m||!g||!i||i!==k,className:"w-full px-4 py-3 rounded-lg bg-gray-100 text-gray-900 font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:m?"Updating…":"Update password"}),(0,b.jsx)("div",{className:"text-center text-sm text-gray-400",children:(0,b.jsx)("button",{type:"button",onClick:()=>{d("request"),r(null),p(null)},className:"text-white font-medium hover:underline",children:"Resend code"})})]})]})})}a.s(["default",()=>d])}];

//# sourceMappingURL=app_auth_password-reset-otp_page_tsx_c86a2181._.js.map