module.exports=[32733,a=>{"use strict";function b(a){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a)}a.s(["categories",0,{income:["Salary","Freelance","Investment","Rental","Business","Other"],expense:["Groceries","Utilities","Transport","Rent/EMI","Education","Healthcare","Entertainment","Shopping","Food & Dining","Insurance","Other"]},"formatCurrency",()=>b])},33223,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(90629),e=a.i(32733);function f(){var a;let{data:f}=(0,d.useFinance)(),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)([]),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null),I=(0,c.useMemo)(()=>f.monthlyIncome>0?(f.monthlyIncome-f.monthlyExpenses)/f.monthlyIncome*100:0,[f.monthlyIncome,f.monthlyExpenses]),J=(0,c.useMemo)(()=>f.monthlyIncome>0?f.monthlyExpenses/f.monthlyIncome*100:100,[f.monthlyIncome,f.monthlyExpenses]),K=(a=Math.round(u??0))>=80?{text:"Excellent",desc:"Outstanding financial health"}:a>=60?{text:"Good",desc:"Above average"}:a>=40?{text:"Fair",desc:"Room for improvement"}:{text:"Needs Work",desc:"Requires attention"};(0,c.useEffect)(()=>{},[]),(0,c.useEffect)(()=>{},[o]),(0,c.useEffect)(()=>{let a={monthlyIncome:f.monthlyIncome,monthlyExpenses:f.monthlyExpenses,balance:f.balance,savingsRate:I,expenseRatio:J,transactions:f.transactions?.slice(0,25)||[]},b=async()=>{F(!0);try{let b=await fetch("/api/ai/recommendations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({financialData:a})}),c=await b.json();if(Array.isArray(c.items)&&c.items.length>0)D(c.items);else throw Error("No items");H(c.source||null)}catch(b){let a=[];I<20&&a.push({title:"Boost Savings Rate",desc:`Aim to save ${(0,e.formatCurrency)(Math.max(0,Math.round(.2*f.monthlyIncome-(f.monthlyIncome-f.monthlyExpenses))))} more monthly`}),f.monthlyExpenses>.7*f.monthlyIncome&&a.push({title:"Reduce Monthly Expenses",desc:"Try to cut expenses by 10-15%"}),0===a.length&&(a.push({title:"Build Emergency Fund",desc:`Target 6 months expenses: ${(0,e.formatCurrency)(6*f.monthlyExpenses)}`}),a.push({title:"Consider Investments",desc:"Explore SIPs and mutual funds for surplus income"})),D(a),H("fallback")}finally{F(!1)}};(async()=>{z(!0);try{let b=await fetch("/api/ai/health",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({financialData:a})}),c=await b.json();"number"==typeof c.score&&v(Math.round(c.score)),c.summary&&x(c.summary),B(c.source||null)}catch(b){let a=50;I>=30?a+=30:I>=20?a+=25:I>=10?a+=15:I>0&&(a+=5),J<=50?a+=20:J<=70&&(a+=10),v(a=Math.min(100,Math.max(0,a))),x("Heuristic score based on savings rate and expense ratio."),B("fallback")}finally{z(!1)}})(),b()},[f.monthlyIncome,f.monthlyExpenses,f.balance,f.transactions]);let L=async()=>{if(g.trim()){l(!0),j(""),n(null);try{let a=await fetch("/api/ai/advisor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:g,financialData:{monthlyIncome:f.monthlyIncome,monthlyExpenses:f.monthlyExpenses,balance:f.balance,savingsRate:I,transactionCount:f.transactions.length}})}),b=await a.json();b.answer?(j(b.answer),n(b.source)):j("Sorry, I couldn't generate a response. Please try again.")}catch(a){console.error("Error asking question:",a),j("Sorry, there was an error processing your question. Please try again.")}finally{l(!1),h("")}}};return(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8 space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"AI Financial Advisor"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Get personalized financial insights and recommendations"})]}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-8",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"w-14 h-14 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,b.jsx)("span",{className:"text-3xl",children:"ðŸ¤–"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Financial Health Score"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,b.jsx)("div",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:y||null===u?"â€”":Math.round(u)}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-gray-600 dark:bg-gray-400 rounded-full transition-all duration-500",style:{width:`${u??0}%`}})}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[y?"Analyzing...":`${K.text} â€¢ ${K.desc}`,A&&(0,b.jsx)("span",{className:"ml-2 text-xs px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",children:"ai"===A?"AI":"Fallback"})]})]})]}),(0,b.jsx)("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:y?"Generating AI summary of your financial healthâ€¦":w||"Summary unavailable."})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ’¡"})}),(0,b.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Smart Recommendations"})]}),E?(0,b.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Generating personalized recommendationsâ€¦"}):(0,b.jsx)("ul",{className:"space-y-3",children:C.map((a,c)=>(0,b.jsxs)("li",{className:"flex gap-3",children:[(0,b.jsx)("span",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"â€¢"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.desc})]})]},c))}),G&&(0,b.jsxs)("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:["Source: ","ai"===G?"AI":"Fallback"]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ“‹"})}),(0,b.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Action Plan"})]}),(0,b.jsxs)("div",{className:"mb-3 flex flex-col sm:flex-row gap-2",children:[(0,b.jsx)("input",{type:"text",value:q,onChange:a=>r(a.target.value),placeholder:"Add an action item (e.g., Review subscriptions)",className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm"}),(0,b.jsx)("input",{type:"text",value:s,onChange:a=>t(a.target.value),placeholder:"Due (e.g., This week)",className:"sm:w-48 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm"}),(0,b.jsx)("button",{onClick:()=>{let a=q.trim();a&&(p(b=>[{id:crypto.randomUUID(),text:a,due:s||void 0,done:!1},...b]),r(""),t(""))},className:"px-4 py-2 rounded-lg bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-sm font-medium disabled:opacity-50",disabled:!q.trim(),children:"Add"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[0===o.length&&(0,b.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No action items yet. Add your first task above."}),o.map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,b.jsx)("input",{type:"checkbox",className:"mt-1",checked:a.done,onChange:()=>{var b;return b=a.id,void p(a=>a.map(a=>a.id===b?{...a,done:!a.done}:a))}}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:`text-sm font-medium ${a.done?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:a.text}),a.due&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due ",a.due]})]}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void p(a=>a.filter(a=>a.id!==b))},className:"text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-100",children:"Remove"})]},a.id))]})]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ’¬"}),(0,b.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Ask Your AI Advisor"}),"ai"===m&&(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded",children:"Powered by Gemini"})]}),(0,b.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,b.jsx)("input",{type:"text",value:g,onChange:a=>h(a.target.value),onKeyPress:a=>"Enter"===a.key&&!k&&L(),placeholder:"Ask any financial question...",disabled:k,className:"flex-1 px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-600 focus:border-transparent disabled:opacity-50"}),(0,b.jsx)("button",{onClick:L,disabled:k||!g.trim(),className:"px-6 py-3 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 font-medium rounded-lg hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"â³":"Ask"})]}),k&&(0,b.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"animate-spin text-xl",children:"ðŸ¤–"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Thinking..."})]})}),i&&!k&&(0,b.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:(0,b.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:i})}),(0,b.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,b.jsx)("button",{onClick:()=>h("How much should I save every month?"),className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"ðŸ’° Savings advice"}),(0,b.jsx)("button",{onClick:()=>h("What investments should I consider?"),className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"ðŸ“ˆ Investment tips"}),(0,b.jsx)("button",{onClick:()=>h("How to reduce my expenses?"),className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"ðŸ’³ Budget help"}),(0,b.jsx)("button",{onClick:()=>h("How to save tax?"),className:"px-3 py-1.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"ðŸ“‹ Tax planning"})]})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=_40de1168._.js.map